---
description: 
globs: 
alwaysApply: true
---
Hereâ€™s a clean and detailed document outlining your project. It covers everything from folder structure to model usage and logging â€” designed to be dead simple for testing and scalable once youâ€™re ready to run all asset pairs.

â¸»

ğŸ§  Moso Agent Blog Generator â€“ Technical Overview & Project Blueprint

ğŸ—‚ Project Summary

Weâ€™re building a Python-based blog generator that will:
	â€¢	Use OpenAI GPT-4.0 mini to generate comparison blogs between two crypto assets.
	â€¢	Rely on a structured JSON schema to ensure consistent content formatting.
	â€¢	Pull data from:
	â€¢	A CSV file of asset pairs (data/asset_pairs.csv)
	â€¢	Individual research JSON files (data/research/{asset_name}.json)
	â€¢	Append the research data to the prompt to enrich the modelâ€™s output.
	â€¢	Log and store raw model responses for transparency and auditing.

â¸»

ğŸ“ Folder Structure

programmatic_blog_generator/
â”œâ”€â”€ .env                           # Stores the OpenAI API Key
â”œâ”€â”€ main.py                        # Entry point for running the script
â”œâ”€â”€ prompts/
â”‚   â””â”€â”€ comparison_prompt.txt      # Prompt template with placeholders
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ comparison_agent.py    # Core logic to handle prompt creation, research merging, API calls
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ csv_loader.py          # Load and parse asset pair CSV
â”‚       â”œâ”€â”€ research_loader.py     # Load research JSON files
â”‚       â””â”€â”€ logger.py              # Handles logging raw responses
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ asset_pairs.csv            # CSV file with asset pairings (column A = term_a, column B = term_b)
â”‚   â””â”€â”€ research/
â”‚       â”œâ”€â”€ bitcoin.json
â”‚       â”œâ”€â”€ ethereum.json
â”‚       â””â”€â”€ ...                    # More asset-specific research files
â”œâ”€â”€ logs/
â”‚   â””â”€â”€ responses/
â”‚       â””â”€â”€ bitcoin-vs-ethereum.json  # Saved model responses for reference
â””â”€â”€ output/
    â””â”€â”€ blogs/
        â””â”€â”€ bitcoin-vs-ethereum.json  # Final blog post output, in structured format



â¸»

ğŸ” Flow of Execution
	1.	Load CSV File
	â€¢	Read asset pairs from data/asset_pairs.csv.
	2.	Pull Research Context
	â€¢	For each asset (term_a, term_b), pull corresponding JSON files from data/research/{term}.json.
	3.	Format Prompt
	â€¢	Insert assets and their research into the base prompt template (prompts/comparison_prompt.txt).
	4.	Call OpenAI API
	â€¢	Use GPT-4.0 mini with temperature, max_tokens, etc., defined in main.py.
	5.	Log Raw Response
	â€¢	Save the full response JSON to logs/responses/{slug}.json.
	6.	Save Final Blog Output
	â€¢	Extract the modelâ€™s content and save it to output/blogs/{slug}.json.

â¸»

ğŸ”‘ API & Configs

Your .env should include:

OPENAI_API_KEY=sk-xxxxx



â¸»

ğŸ§  Model Prompt Format

The prompt uses your supplied template titled:

ğŸ“Œ Expert Crypto Comparison Content Creator

Youâ€™ll pass:
	â€¢	{term_a}
	â€¢	{term_b}
	â€¢	{research_context} (merged from both term_a.json and term_b.json)

The output must follow the strict JSON schema you outlined (title, slug, intro, background, key differences, table, conclusion, etc.).

â¸»

ğŸ“ Notes on Scalability

Once the system produces high-quality content for a few pairs:
	â€¢	You can scale by looping over all 2,450 pairs from the CSV.
	â€¢	Use batching or rate limiting to avoid hitting API rate limits.
	â€¢	Consider adding retry logic for API errors or incomplete outputs.

â¸»

âœ… Quality Control

Weâ€™ll enforce:
	â€¢	Strict adherence to schema and word count (1,300â€“1,500 words)
	â€¢	Consistent naming for slugs and output files
	â€¢	Logging of all raw completions for later review or audit
	â€¢	Post-processing validation to check for required sections, JSON completeness, and word count

â¸»

Let me know when you want help generating the starter code for:
	â€¢	main.py
	â€¢	comparison_agent.py
	â€¢	csv_loader.py
	â€¢	and logger.py

We can also add validation scripts if you want to double-check model outputs before publishing.
